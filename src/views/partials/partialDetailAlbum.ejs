<%- include('head', { title: 'Fans' }) %>
<%- include('header') %>

<div class="partial-Section1">
    <div class="partial-Section1-texto">
        <h2>Productos populares</h2>
        <p>
            Esta zona está dedicada a los productos que tienen un gran número de ventas, un número que aumenta en uno por cada producto individual cada vez que una compra se concreta.
        </p>
    </div>
    <div class="partial-productDisplaySection">
        <% albumData.forEach(album => { %>
            <div class="partial-productDisplay2" data-image="<%= album.image %>" data-title="<%= album.title %>" data-price="<%= album.price %>" data-description="<%= album.description %>" data-band="<%= album.band.name %>" data-discography="<%= album.discography %>" data-year="<%= album.year %>" data-discount="<%= album.discount %>">
                <img src="/images/albums/<%= album.image %>" alt="<%= album.title %>">
                <div class="fans-precio">$<%= album.price %></div>
            </div>
        <% }); %>
    </div>
</div>
</div>

<div class="partial-detailMerch" id="detailMerch" style="display: none;">
    <div class="modal-content">
        <span class="closedetailMerch" id="closeModal">&times;</span>
        <div class="grupoC">
            <div class="grupoA">
                <div class="grupo1">
                    <img id="product-image" src="" alt="">
                </div>
                <div class="grupo2">
                    <h1 id="product-name"></h1>
                    <h1 id="product-price"></h1>
                    <p class="grupoX" id="product-discount"></p> 
                    <p class="grupoX" id="product-band"></p>
                    <p class="grupoX" id="product-discography"></p>
                    <p class="grupoX" id="product-year"></p> 
                </div>
                <div class="grupo3">
                    <p id="product-description"></p>
                </div>
            </div>
            <div class="grupoB">
                <button id="add-to-cart">Añadir al carrito</button>
            </div>
        </div>
    </div>
</div>



<script>
const modal = document.getElementById('detailMerch');
const closeModal = document.getElementById('closeModal');
const productImage = document.getElementById('product-image');
const productName = document.getElementById('product-name');
const productPrice = document.getElementById('product-price');
const productDescription = document.getElementById('product-description');
const addToCartButton = document.getElementById('add-to-cart');

const albumItems = document.querySelectorAll('.partial-productDisplay2');

albumItems.forEach(albumItem => {
    albumItem.addEventListener('click', () => {
        const image = '/images/albums/' + albumItem.getAttribute('data-image');
        const title = albumItem.getAttribute('data-title');
        const price = albumItem.getAttribute('data-price');
        const discount = albumItem.getAttribute('data-discount');
        const description = albumItem.getAttribute('data-description');
        const band = albumItem.getAttribute('data-band');
        const discography = albumItem.getAttribute('data-discography');
        const year = albumItem.getAttribute('data-year');

        productImage.src = image;
        productName.textContent = title;
        productPrice.textContent = '$' + price;
        productDescription.textContent = description;

        const grupo2 = document.querySelector('.grupoX');
        grupo2.innerHTML = '';

        if (discount > 0) {
            const discountElement = document.createElement('p');
            discountElement.textContent = 'Descuento: ' + discount + '%';
            grupo2.appendChild(discountElement);
        }

        const bandElement = document.createElement('p');
        bandElement.textContent = 'Banda: ' + band;
        grupo2.appendChild(bandElement);

        const discographyElement = document.createElement('p');
        discographyElement.textContent = 'Discografía: ' + discography;
        grupo2.appendChild(discographyElement);

        const yearElement = document.createElement('p');
        yearElement.textContent = 'Año: ' + year;
        grupo2.appendChild(yearElement);


        modal.style.display = 'block';
    });
});

closeModal.addEventListener('click', () => {
    modal.style.display = 'none';
});

document.addEventListener('click', (event) => {
    if (event.target === modal) {
        modal.style.display = 'none';
    }
});
</script>
